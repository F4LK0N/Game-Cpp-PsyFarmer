#include "TileFkn.h"



//#####################################################################################################################################################################
TileFkn::TileFkn(){
	spritesheetName="";
	imagePath="";
	animations=0;
	frames=0;
	spritesheet.setAncora(0, 0);
}
//#####################################################################################################################################################################
//#####################################################################################################################################################################
//#####################################################################################################################################################################



//#####################################################################################################################################################################
TileFkn::~TileFkn(){}
//#####################################################################################################################################################################
//#####################################################################################################################################################################
//#####################################################################################################################################################################



//#####################################################################################################################################################################
void TileFkn::load(string spritesheetName, string imagePath, int animations, int frames){
	this->spritesheetName=spritesheetName;
	this->imagePath=imagePath;
	this->animations=animations;
	this->frames=frames;

	//CHECK SPRITESHEET
	unload();
	ifstream file;
	do{
		//DLC
		file.open("dlcs/"+imagePath);
		if(file.is_open()){
			this->imagePath="dlcs/"+imagePath;
			break; }

		//INTERNAL
		file.open("_internal/"+imagePath);
		if(file.is_open()){
			this->imagePath="_internal/"+imagePath;
			break; }

		//DEFAULT
		this->animations=1;
		this->frames=1;
		if(spritesheetName=="especial" || spritesheetName=="special"){
			this->imagePath="_internal/images/5-default-special.png"; }
		else if(spritesheetName=="pedra" || spritesheetName=="rock" || spritesheetName=="agrotoxic"){
			this->imagePath="_internal/images/4-default-pedra.png"; }
		else if(spritesheetName=="ouro" || spritesheetName=="gold" || spritesheetName=="bag" || spritesheetName=="cornbag"){
			this->imagePath="_internal/images/3-default-gold.png"; }
		else if(spritesheetName=="esmeralda" || spritesheetName=="emerald" || spritesheetName=="diamond" || spritesheetName=="corn"){
			this->imagePath="_internal/images/2-default-esmeralda.png"; }
		else if(spritesheetName=="buraco" || spritesheetName=="hole" || spritesheetName=="ground"){
			this->imagePath="_internal/images/0-default-buraco.png"; }
		else{
			this->frames=4;
			this->imagePath="_internal/images/1-default-terra.png"; }

	}while(false);//<-- Sorry about this :P
	file.close();


	//LOAD SET SPRITESHEET
	this->spritesheetName="TILE"+this->spritesheetName;
	gRecursos.carregarSpriteSheet(this->spritesheetName, this->imagePath, this->animations, this->frames);
	this->spritesheet.setSpriteSheet(this->spritesheetName);
}
//#####################################################################################################################################################################
//#####################################################################################################################################################################
//#####################################################################################################################################################################



//#####################################################################################################################################################################
void TileFkn::unload(){
	if(this->spritesheetName!=""){
		gRecursos.descarregarSpriteSheet(this->spritesheetName);   }}
//#####################################################################################################################################################################
//#####################################################################################################################################################################
//#####################################################################################################################################################################



//#####################################################################################################################################################################
void TileFkn::draw(int x, int y){
	spritesheet.desenhar(x, y);   }
//#####################################################################################################################################################################
//#####################################################################################################################################################################
//#####################################################################################################################################################################



//#####################################################################################################################################################################
void TileFkn::animate(){
	spritesheet.avancarAnimacao();   }
//#####################################################################################################################################################################
//#####################################################################################################################################################################
//#####################################################################################################################################################################




